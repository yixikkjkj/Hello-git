# 短信充值链接

| 跟踪渠道   | 条数  | 价格 | 链接                                                         |
| ---------- | ----- | ---- | ------------------------------------------------------------ |
| 全局弹窗   | 5880  | 270  | http://meizhe.meideng.net/sms/alipay?channel=MZ_DIALOG&fee=27000&amount=5880&item_code=PR_20200308-v2 |
| 全局弹窗   | 40820 | 1796 | http://meizhe.meideng.net/sms/alipay?channel=MZ_DIALOG&fee=179600&amount=40820&item_code=PR_20200308-v4 |
| 全局弹窗   | 6120  | 269  | http://meizhe.meideng.net/sms/alipay?channel=MZ_DIALOG&fee=26900&amount=6120&item_code=PR_20200308-v2 |
| 全局弹窗   | 42550 | 1787 | http://meizhe.meideng.net/sms/alipay?channel=MZ_DIALOG&fee=178700&amount=42500&item_code=PR_20200308-v4 |
| 首页Banner | 5880  | 270  | http://meizhe.meideng.net/sms/alipay?channel=MZ_BANNER&fee=27000&amount=5880&item_code=PR_20200308-v2 |
| 首页Banner | 40820 | 1796 | http://meizhe.meideng.net/sms/alipay?channel=MZ_BANNER&fee=179600&amount=40820&item_code=PR_20200308-v4 |
| 首页Banner | 6120  | 269  | http://meizhe.meideng.net/sms/alipay?channel=MZ_BANNER&fee=26900&amount=6120&item_code=PR_20200308-v2 |
| 首页Banner | 42550 | 1787 | http://meizhe.meideng.net/sms/alipay?channel=MZ_BANNER&fee=178700&amount=42500&item_code=PR_20200308-v4 |


#  0224 分锅

## 需求

1. 分时折扣设置的功能
2. 授权过期的处理能力
   1. 用户登陆时会获取授权，获取授权后旧授权会过期，异步任务会调用失败
3. 店铺数据展示
   1. https://open.pinduoduo.com/#/apidocument?port=5&id=36
      用这里的 pdd.order.list.get 可以拿

top,left

58 82

69 0

28 23



# 接口联调中的问题

## 创建单元

### 使用系统关键字出价必须高于市场平均价格

市场平均价格位 281 厘，则出价必须大于等于 290

# 商品信息

| 属性 | 字段 | 来源 |
| --- | --- | -- |
| 商品名 | goods_name | list |
| 商品 ID | goods_id | list |
| 商品类型 | goods_type | detail |
| 商品类型 | goods_type | detail |
| 库存 | goods_quantity | list |
| 库存 | quantity | detail |
| 状态 | status | detail |
| 是否上架 | is_onsale | list |
| 图片url | image_url | list |
| 缩略图url | thumb_url | list |
| 商品类目 | cat_id | detail |
|  |  |  |


| 名称 | 描述 |
| --- | --- |
| bad_fruit_claim | 坏果包赔 |
| buy_limit | 限购次数 |
| carousel_gallery_list | 商品轮播图列表 |
| cat_id | 类目 id |
| cost_template_id | 运费模板 id |
| country_id | 国家 id |
| customer_num | 团购人数 |
| customs | 海关名称 |
| delivery_one_day |  |
| detail_gallery_list | 商品详情图 |
| end_production_date |  |
| fabric_content_id |  |
| fabric_id |  |
| goods_desc | 商品描述 |
| goods_id | 商品 Id |
| goods_name | 商品名称 |
| goods_pattern |  |
| goods_property_list | 商品属性列表 |
| goods_type | 商品类型 |
| hd_thumb_url | （看起来是缩略图 url） |
| image_url | 商品主图 |
| invoice_status | 是否支持正品发票 |
| is_customs | 是否海关 |
| is_folt | 是否假一赔十 |
| is_pre_sale | 是否预售 |
| is_refundable | 是否7天无理由退换 |
| lack_of_weight_claim | 缺重包退 |
| mai_jia_zi_ti | 买家自提模版id |
| market_price | 市场价 |
| order_limit | 单次限量 |
| origin_country_id |  |
| outer_goods_id | 商家编码 |
| oversea_goods |  |
| oversea_type |  |
| paper_length |  |
| paper_net_weight |  |
| paper_plies_num |  |
| paper_width |  |
| pre_sale_time | 预售时间 |
| production_license |  |
| production_standard_number |  |
| quan_guo_lian_bao | 是否支持全国联保 |
| second_hand | 是否二手 |
| shang_men_an_zhuang | 上门安装模板 id |
| shelf_life |  |
| shipment_limit_second | 承诺发货时间 |
| sku_list | sku列表 |
| song_huo_an_zhuang | 送货入户并安装模版id |
| song_huo_ru_hu | 送货入户模版id |
| start_production_date |  |
| status | 商品状态 |
| thumb_url | 缩略图 url |
| tiny_name | 短标题 |
| video_gallery | 商品视频 |
| warehouse | 保税仓 |
| warm_tips | 水果类目温馨提示 |
| zhi_huan_bu_xiu | 只换不修的天数 |

# 短信小程序充值

## 问兵哥

兵哥，有个事情要咨询一下
今天中午的时候徐杨岚跟我说小程序的短信充值付款 alipay_url 跳转过去报错了，然后我去看了一下文档发现小程序短信付款流程不一样
小程序的流程大概是这张图的样子

然后决定新写一个接口去调这个 alipay.trade.create，写完了之后在本地测试返回了

ISV权限不足，建议在开发者中心检查对应功能是否已经添加，解决办法详见：https://docs.open.alipay.com/common/isverror

看起来是需要去支付宝开发者中心去授权，这个是需要你来给权限嘛？

## 问靓依

靓依，有个事情想问一下
今天中午的时候徐杨岚跟我说小程序的短信充值付款 alipay_url 跳转过去报错了，然后我去看了一下文档发现小程序短信付款流程不一样
于是新写了一个接口去创建订单，写完了之后发现没有这个接口的权限，问了一下李兵说应该来找你

接口是 alipay.trade.create

# GIT

## git pull 和 push

git pull <远程主机名> <远程分支名>:<本地分支名>

1. 冒号后面的本地分支名，如果是当前分支，则可以省略

git push <远程主机名> <本地分支名>:<远程分支名>

1. 如果仅省略远程分支名，则认为远程分支名和本地分支名相同，或者默认为 master
2. 如果仅省略本地分支名，则表示删除远程分支，表示为推一个空的分支上去
3. 如果省略了本地和远程分支名，则认为当前本地分支推送到远端同样名字的分支

## 追踪关系

1. git clone 时，对远程和本地同名的分支建立追踪关系
2. 手动通过设置 upstream 去建立追踪关系

## git reset 的问题

1. 当你不小心 push 了一个错误的提交，这个错误包括但不限于

   - 写错了代码，就是需要 reset 回来
   - 应该写在前一个 commit 中，但是却独立了另一个 commit

2. 这时候如果你 reset 了上一个版本的代码，本地的修改不会消失的，为了能把远端的提交也干掉，这时候你需要：

   - 手动把所有的代码都还原成上一个版本的状态，即对应上一个版本无修改
   - git stash 暂存这个修改，这时也是对应上个版本无修改的状态

3) 然后强行刷掉远端的提交，即 git push <远端主机名> <本地分支名>:<远端分支名> --force
4) 这时候 tig 再去查看的时候，远端已经是前一个版本的状态了
5) 这时候再去搞新的提交吧

## git branch 合并问题

我们假定分支 A 需要合并到分支 B，合并可能遇到的问题是如果直接合并会导致 A 和 B 冲突，因此采取这样的策略

1. 先将 B 分支的代码合并或重演到 A 分支上 git pull origin B --rebase 或者 git pull origin B --merge
2. 此时冲突了，那我们解决冲突
3. 然后将冲突的文件 git add
4. 因为冲突，重演或者合并暂停了，既然解决了冲突，那我们继续 git rebase --continue 或者 git merge --continue
5. 全都解决完成之后我们就可以提交了
6. 然后进行合并，在分支 B 上执行 git merge A
7. 执行完成之后再提交，就把 A 的内容合并到 B 了，并且同步到了远端的 B 分支
8. 可能需要删除远端的 A 分支，可以使用 git push origin --delete A 来删除远端的 A 分支
9. 可能本地的 A 分支也不要了，用 git branch -d A 就可以了

# celery==4.4.0 和 redbeat==0.13.0 的问题

redbeat 在保存 task 执行时间到 redis 后，一直认为是 utc 时间，取出来的时候直接给加上了 utc 时区，redbeat 这样做是因为 celery.ScheduleEntry 使用了 utc 时间，并且还写了一句注释

> celery.ScheduleEntry sets last_run_at = utcnow(), which is confusing and wrong

celery 4.4.0 以前的版本没有校验 redbeat 取出来的时间和 celery 当前时间的时区不同，一直都相安无事，4.4.0 的时候给加上了，改动日志上说明是希望解决一个 bug（但是带来了新的 bug），这样校验之后 redbeat 总是得到 8 小时之后的时间，因此才会只有 beat: Waking up in 5.00 minutes 这样的 log

我觉得暂时还是先不要升级了


# 凯恩斯主义

## 以前是怎么做的

1. 理想情况下，资本家付给雇员的工资应当被消费掉，即收入=支出
2. 雇员的生产能力足够强，创造的价值>收入，此时市场就会供大于求，于是降价，于是雇员的收入有结余
3. 结余的钱可以拿去做投资，这样依然能够保证收入=支出

## 出现了什么问题

1. 投资是不能一直投的，因为存在投资边际递减效应，当投资的收益还不如银行利率高的时候，那就不如不投资了
2. 为了继续投资，那可以把银行利率降低，就能使投资的量更多了，如果降到 0，那可以让所有钱都拿去投资。
3. 但是利率不能降到 0，因为如果降到 0 了，人们就会因为菜单成本和流动性陷阱，不如把钱放在家里

国家：我们新发布了外国人永久居留草案，另外这两天我们要清网
我们：为什么我看的论坛/我的账号又封了？
国家：我就知道大家对草案没有什么问题

我一开始总觉得，我挺自由的，我也认为自由就是我重要的追求，但是不知道什么时候，突然就像这样，钢筋穿胸而过，钉在原地，一点都动不了。现在想想，背上的重量确实很重，钢筋插着我也很疼，长久以来我也因为不自由而颓丧。但如果我的不自由能够保护你，避免这样的重量压到你身上，那我就不亏——你是更重要的追求。来，帮我拍张照片吧，我没有很多的时间了。
