# 计算广告介绍

## 计算广告基础

### 广告的定义和目的

由已确定的出资人，通过各种媒介，有偿的、有组织的、综合的、劝服性的非人员的信息传播活动，即广告的定义

一切付费的信息、产品或服务的传播渠道，都是广告

广告的三方：出资人，媒体，受众

出资人通过媒体获得低成本的受众接触，即广告的目的

### 在线广告的表现形式

1. 横幅广告
2. 文字链广告
3. 富媒体广告
4. 视频广告
5. 交互式广告，服务端交互方案，HTML5模拟的方案
6. 社交广告，在用户交互过程中自然地投放广告
7. 移动广告，移动应用中的广告
8. 邮件营销广告
9. 激励广告，积分、返利
10. 团购
11. 游戏联运，发行商和开发商
12. 固定位导航，导航位置

### 在线广告发展

1. 展示广告，合约到竞价
2. 定向广告系统的出现
   1. 受众定向
   2. 广告投放，在合适地条件下投放广告
   3. 在线分配流量到各个互相交叉的人群上
3. 搜索广告，关键词竞价，上下文广告，广义第二高价
4. 基于竞价和精准人群定向两个核心功能，产生了广告网络（ADN），产生了需求方平台（DSP）

TODO: 插一个进化图

### 广告有效性模型

TODO: 插入PlantUml

越靠前的阶段，对点击率的影响越大，越靠后的阶段，对转化率的影响越大

### 计算广告核心问题

为一系列用户与上下文组合，找到最合适的广告投放策略，以优化整体广告活动的利润，这是核心问题

结算方式与千次展现收益eCPM的关系

1. CPT(Cost Per Time): 独占方式售卖广告位
2. CPM(Cost Per Mille): 千次展现结算。供给方和需求方约定好千次展示的计费标准，需求方根据市场策略与预算控制流量单价，以CPM方式结算。
3. CPC(Cost Per Click): 点击结算。点击率的估计由供给方完成，点击价值的估计由需求方完成。
4. CPS(Cost Per Sale)/CPA(Cost Per Action)/ROI: 需求方按照最后的转化收益来结算，最大程度上规避了风险。供给方除了点击率，还要对点击价值进行估算
5. oCPM(optimzied CPM): 仍以CPM方式结算，但会根据转化率进行优化。

| 结算方式 | 点击率估计 | 点击价值估计 | 优缺点 | 适用场景 |
| --- | --- | --- | --- | --- |
| CPT | 需求方 | 需求方 | 可以充分发挥橱窗效应 | 高曝光的品牌广告 |
| CPM | 需求方 | 需求方 | 可利用受众定向选择目标人群 | 有受众选择需求的品牌广告 |
| CPC | 供给方 | 需求方 | 可以精细划分受众人群，合理供需双方分工 | 竞价广告网络 |
| CPS/CPA/ROI | 供给方 | 供给方 | 需求方无任何风险，供给方运营难度大 | 效果类广告联盟 |
| oCPM | 供给方 | 供给方 | 向CPA方式稳健过渡 | 数据能力较强的广告平台 |

## 搜索广告与竞价广告

以查询词为粒度进行受众定向，按照竞价方式售卖，按点击结算的广告产品

搜索广告的竞价的标的物是**竞价关键词**，用户输入的**查询**通过与关键词匹配来确定是否触发这个广告。可以是精确查询，也可以有更多扩展方式，称为查询扩展。

1. 搜索广告的变现能力，远高于一般的展示广告
2. 搜索广告的受众定向标签，是上下文的搜索标签，用户的查询直接反应了用户意图，可以做非常精准的定向
3. 搜索广告的展示形式与自然结果的形式非常近
4. 搜索广告中发展起来的竞价交易模式，逐渐成为互联网广告最主流的交易模式

### 搜索广告新形式

1. 创意代替文字链，Logo、图片、视频等创意形式代替了单调的文字，增加更多有表现力的信息点
2. 弱广告形式，在合理和可解释的范围内可以增加一点相关性要求稍低的泛化内容
3. 原生化，搜索广告具有原生广告的特点，它由用户主动意图触发，展示上和自然结果相差不大

### 产品策略

决策过程分为查询扩展、检索、排序、放置、定价等几个阶段

1. 查询扩展
   1. 精确匹配
   2. 短语匹配
   3. 广泛匹配
      1. 基于推荐的方法（协同过滤）
      2. 基于主题模型的方法（语义相关）
      3. 基于历史效果的方法
   4. 否定匹配
2. 广告放置
   1. 广告的相关度是否足够
   2. 广告的千次展现收入（RPM）是否足够

### 位置拍卖与机制设计

1. 市场保留价
2. 定价
   1. 广义第二高价（GSP）
   2. VCG
3. 价格挤压
   1. 公式：r = μ^k*bid_{cpc}
   2. k -> ∞，按点击率来排序
   3. k -> 0，按出价来排序

## 信息流与原生广告

从软文、搜索广告到社交网络的信息流广告，都有一些原生广告的意味。将商业化内容与非商业化内容统一生产或混合排序的产品，都可以认为与原生广告有关，即内容即广告（吐槽热搜）

### 信息流广告

广告与内容以联动的方式进行交互，被广告区隔开的各个内容之间的都没有联系

产品关键
1. 广告位的适配问题
2. 广告的竞价与放置
   1. 首条广告的位置，两广告之间的间隔

### 原生广告产品特征

1. 表现原生与场景原生
   1. 表现原生需要媒体控制广告展现形式，广告与内容需要尽量的表现一致
   2. 场景原生需要媒体提供明确的场景和需求
2. 场景的感知与运用
   1. 移动环境下的场景有特别重要的意义，移动设备将会有更加丰富的用户行为、地理位置、设备信息
3. 植入式原生广告

## 计算广告系统架构

### 在线广告系统一般性架构示意

TODO 来张图

### 离线数据处理

1. 用户会话日志生成
2. 行为定向
3. 上下文定向
4. 点击率建模
5. 分配规划
6. 商业智能系统
7. 广告管理系统

## 计算广告基础知识

### 信息检索

1. 倒排索引
2. 向量空间模型，最基础且最重要的文档相似度度量方法之一
   1. 用各个关键词在文档中的强度（如TF-IDF\[词频-倒数文档频率\]值）组成的矢量来表示文档。
   2. 计算两文档相似度时，用其对应矢量的余弦值

### 最优化方法

最优化问题讨论的是，给定某个确定的目标函数，以及该函数自变量的一些约束条件，求解函数的最值问题，带约束优化

1. 拉格朗日法与凸优化
2. 下降单纯形法
3. 梯度下降法
4. 拟牛顿法

### 机器学习

1. 最大熵与指数族分布
2. 混合模型和EM算法
3. 贝叶斯学习
   1. 共轭先验
   2. 经验贝叶斯

## 受众定向的核心技术

### 用户标签

1. 人口属性
2. 行为定向

### 上下文标签

根据用户浏览的上下文给用户打上标签

1. 地域定向
2. 频道定向
3. 上下文定向

### 定制化标签（DSP）

1. 重定向
2. 新客推荐

### 文本主题挖掘

文本主题模型有两大类别：一种是预先定义好主题的集合，用监督学习的方法将文档映射到这一集合的元素上；另一种是不预先定义主题集合，二十控制主题的总个数和聚类程度，用非监督学习的方法自动学习出主题集合，以及文档到这些主题的映射函数。

如果有M个词，N个文档，那么可以用向量来表示每个文档的词频或TF-IDF值，组成一个矩阵。一般情况下，这个矩阵都会非常稀疏。如果文档主题模型对应着T个主题，那么目的就是计算每个文档在主题上的强度。

1. LSA模型
2. PLSI模型
3. LDA模型
4. 词嵌入word2vec
   词嵌入指的是将词级别的语义信息映射成实数向量来表达。语义相近的词会出现在离得更近的地方，从而使次的表示具有一定的泛化性。

## 点击率预测模型

### 基础模型LR

在展示广告时，点击事件是一个二元取值的随机变量，点击事件的分布可以写成点击率为参数的**二项分布**：

p(h)=μ^h(1-μ)^{1-h}

点击率和用户、上下文、广告有关，可以想到的基础模型是逻辑回归LR

### LR模型的优化算法

1. L-BFGS拟牛顿法
2. 置信域法

### 点击率模型评测

可以采用准确率/召回率（Precision/Recall PR）曲线或者接收机操作特性（Receive Operating Characteristic, ROC）曲线来评测

|  | 点击 | 非点击 |
| --- | --- | --- |
| 预测点击 | True | False |
| 预测非点击 | False | True |
